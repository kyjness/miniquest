<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="community.css">
    <title>커뮤니티 홈페이지</title>
</head>
<body>
    <!-- 헤더 -->
    <header class="header">
        <div class="header-container">
            <div class="logo-section">
                <h1 class="logo">커뮤니티</h1>
            </div>
            <nav class="nav">
                <a href="#" class="nav-link active">홈</a>
                <a href="#" class="nav-link">게시판</a>
                <a href="#" class="nav-link">인기글</a>
                <a href="#" class="nav-link">공지사항</a>
            </nav>
            <div class="user-section">
                <button class="btn-login">로그인</button>
                <button class="btn-signup">회원가입</button>
            </div>
        </div>
    </header>

    <!-- 메인 컨텐츠 -->
    <main class="main">
        <div class="main-container">
            <!-- 왼쪽 사이드바 -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">카테고리</h3>
                    <ul class="category-list">
                        <li><a href="#" class="category-link">전체</a></li>
                        <li><a href="#" class="category-link">자유게시판</a></li>
                        <li><a href="#" class="category-link">질문답변</a></li>
                        <li><a href="#" class="category-link">정보공유</a></li>
                        <li><a href="#" class="category-link">후기</a></li>
                        <li><a href="#" class="category-link">모임</a></li>
                    </ul>
                </div>
                <div class="sidebar-section">
                    <h3 class="sidebar-title">인기 태그</h3>
                    <div class="tag-list">
                        <span class="tag">#프로그래밍</span>
                        <span class="tag">#웹개발</span>
                        <span class="tag">#자바스크립트</span>
                        <span class="tag">#리액트</span>
                        <span class="tag">#노드js</span>
                        <span class="tag">#프론트엔드</span>
                    </div>
                </div>
            </aside>

            <!-- 중앙 컨텐츠 영역 -->
            <section class="content">
                <!-- 배너 영역 -->
                <div class="banner">
                    <div class="banner-content">
                        <h2>커뮤니티에 오신 것을 환영합니다!</h2>
                        <p>다양한 주제로 소통하고 정보를 공유해보세요.</p>
                    </div>
                </div>

                <!-- 게시글 목록 -->
                <div class="posts-section">
                    <div class="section-header">
                        <h2 class="section-title">최신 게시글</h2>
                        <button class="btn-write">글쓰기</button>
                    </div>

                    <div class="posts-list" id="postsList">
                        <!-- 게시글이 여기에 동적으로 추가됩니다 -->
                        <!-- 게시글 카드 1 -->
                        <article class="post-card" style="display: none;">
                            <div class="post-header">
                                <span class="post-category">자유게시판</span>
                                <span class="post-date">2024.01.15</span>
                            </div>
                            <h3 class="post-title">웹 개발을 시작하는 분들을 위한 가이드</h3>
                            <p class="post-content">웹 개발을 처음 시작하시는 분들을 위한 기본 가이드입니다. HTML, CSS, JavaScript부터 시작해서 프레임워크까지 차근차근 설명드리겠습니다.</p>
                            <div class="post-footer">
                                <div class="post-author">
                                    <span class="author-name">개발자123</span>
                                </div>
                                <div class="post-stats">
                                    <span class="stat">👁 125</span>
                                    <span class="stat">💬 8</span>
                                    <span class="stat">❤️ 12</span>
                                </div>
                            </div>
                        </article>

                        <!-- 게시글 카드 2 -->
                        <article class="post-card">
                            <div class="post-header">
                                <span class="post-category">질문답변</span>
                                <span class="post-date">2024.01.14</span>
                            </div>
                            <h3 class="post-title">React에서 상태 관리가 궁금합니다</h3>
                            <p class="post-content">React를 사용하다가 상태 관리에 대해 궁금한 점이 생겼습니다. useState와 useReducer의 차이점과 언제 어떤 것을 사용해야 하는지 알려주세요.</p>
                            <div class="post-footer">
                                <div class="post-author">
                                    <span class="author-name">초보개발자</span>
                                </div>
                                <div class="post-stats">
                                    <span class="stat">👁 89</span>
                                    <span class="stat">💬 15</span>
                                    <span class="stat">❤️ 5</span>
                                </div>
                            </div>
                        </article>

                        <!-- 게시글 카드 3 -->
                        <article class="post-card">
                            <div class="post-header">
                                <span class="post-category">정보공유</span>
                                <span class="post-date">2024.01.13</span>
                            </div>
                            <h3 class="post-title">유용한 개발 도구 추천</h3>
                            <p class="post-content">개발 생산성을 높여주는 유용한 도구들을 정리해봤습니다. VS Code 확장 프로그램부터 디버깅 도구까지 다양한 도구를 소개합니다.</p>
                            <div class="post-footer">
                                <div class="post-author">
                                    <span class="author-name">도구마스터</span>
                                </div>
                                <div class="post-stats">
                                    <span class="stat">👁 234</span>
                                    <span class="stat">💬 22</span>
                                    <span class="stat">❤️ 45</span>
                                </div>
                            </div>
                        </article>

                        <!-- 게시글 카드 4 -->
                        <article class="post-card">
                            <div class="post-header">
                                <span class="post-category">후기</span>
                                <span class="post-date">2024.01.12</span>
                            </div>
                            <h3 class="post-title">부트캠프 수강 후기</h3>
                            <p class="post-content">웹 개발 부트캠프를 수강하고 취업까지 성공한 후기를 공유합니다. 어떤 점이 도움이 되었는지, 추천할 만한지 솔직하게 말씀드리겠습니다.</p>
                            <div class="post-footer">
                                <div class="post-author">
                                    <span class="author-name">성공한개발자</span>
                                </div>
                                <div class="post-stats">
                                    <span class="stat">👁 567</span>
                                    <span class="stat">💬 34</span>
                                    <span class="stat">❤️ 78</span>
                                </div>
                            </div>
                        </article>

                        <!-- 게시글 카드 5 -->
                        <article class="post-card">
                            <div class="post-header">
                                <span class="post-category">모임</span>
                                <span class="post-date">2024.01.11</span>
                            </div>
                            <h3 class="post-title">주말 코딩 모임 참가자 모집</h3>
                            <p class="post-content">이번 주말에 함께 코딩하며 공부할 분들을 모집합니다. 관심 있는 주제로 프로젝트를 만들거나 스터디를 진행할 예정입니다.</p>
                            <div class="post-footer">
                                <div class="post-author">
                                    <span class="author-name">모임장</span>
                                </div>
                                <div class="post-stats">
                                    <span class="stat">👁 156</span>
                                    <span class="stat">💬 9</span>
                                    <span class="stat">❤️ 23</span>
                                </div>
                            </div>
                        </article>

                        <!-- 게시글 카드 6 -->
                        <article class="post-card">
                            <div class="post-header">
                                <span class="post-category">자유게시판</span>
                                <span class="post-date">2024.01.10</span>
                            </div>
                            <h3 class="post-title">프론트엔드 개발자 로드맵</h3>
                            <p class="post-content">프론트엔드 개발자가 되기 위한 학습 로드맵을 정리했습니다. 기초부터 고급까지 단계별로 어떤 것을 공부해야 하는지 알려드립니다.</p>
                            <div class="post-footer">
                                <div class="post-author">
                                    <span class="author-name">로드맵제작자</span>
                                </div>
                                <div class="post-stats">
                                    <span class="stat">👁 445</span>
                                    <span class="stat">💬 28</span>
                                    <span class="stat">❤️ 67</span>
                                </div>
                            </div>
                        </article>
                    </div>
                </div>
            </section>

            <!-- 오른쪽 사이드바 -->
            <aside class="sidebar-right">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">인기 게시글</h3>
                    <ul class="popular-list">
                        <li class="popular-item">
                            <span class="popular-rank">1</span>
                            <span class="popular-title">웹 개발을 시작하는 분들을 위한 가이드</span>
                        </li>
                        <li class="popular-item">
                            <span class="popular-rank">2</span>
                            <span class="popular-title">유용한 개발 도구 추천</span>
                        </li>
                        <li class="popular-item">
                            <span class="popular-rank">3</span>
                            <span class="popular-title">부트캠프 수강 후기</span>
                        </li>
                        <li class="popular-item">
                            <span class="popular-rank">4</span>
                            <span class="popular-title">프론트엔드 개발자 로드맵</span>
                        </li>
                        <li class="popular-item">
                            <span class="popular-rank">5</span>
                            <span class="popular-title">React에서 상태 관리가 궁금합니다</span>
                        </li>
                    </ul>
                </div>
                <div class="sidebar-section">
                    <h3 class="sidebar-title">공지사항</h3>
                    <ul class="notice-list">
                        <li class="notice-item">
                            <span class="notice-badge">공지</span>
                            <span class="notice-title">커뮤니티 이용 규칙 안내</span>
                        </li>
                        <li class="notice-item">
                            <span class="notice-badge">공지</span>
                            <span class="notice-title">신규 기능 업데이트 안내</span>
                        </li>
                    </ul>
                </div>
            </aside>
        </div>
    </main>

    <!-- 푸터 -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h4>커뮤니티</h4>
                <p>함께 성장하는 개발자 커뮤니티</p>
            </div>
            <div class="footer-section">
                <h4>링크</h4>
                <ul class="footer-links">
                    <li><a href="#">이용약관</a></li>
                    <li><a href="#">개인정보처리방침</a></li>
                    <li><a href="#">문의하기</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>연락처</h4>
                <p>이메일: contact@community.com</p>
                <p>전화: 02-1234-5678</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 커뮤니티. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // API 기본 URL
        const API_BASE_URL = 'https://jsonplaceholder.typicode.com';

        // DOM 요소 가져오기
        const postsList = document.getElementById('postsList');
        const btnWrite = document.querySelector('.btn-write');
        const categoryLinks = document.querySelectorAll('.category-link');
        const navLinks = document.querySelectorAll('.nav-link');

        // ========== 이벤트 리스너 ==========

        // 페이지 로드 시 게시글 목록 가져오기
        document.addEventListener('DOMContentLoaded', function() {
            loadPosts();
        });

        // 글쓰기 버튼 클릭 이벤트
        btnWrite.addEventListener('click', function() {
            alert('글쓰기 기능은 게시판 페이지에서 이용하실 수 있습니다.');
        });

        // 카테고리 링크 클릭 이벤트
        categoryLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                // 활성 상태 변경
                categoryLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                // 카테고리별 게시글 필터링 (예시)
                const category = this.textContent.trim();
                loadPosts(category);
            });
        });

        // 네비게이션 링크 클릭 이벤트
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                // 활성 상태 변경
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                const navText = this.textContent.trim();
                if (navText === '게시판') {
                    // 게시판 페이지로 이동하거나 게시글 새로고침
                    loadPosts();
                } else if (navText === '인기글') {
                    loadPopularPosts();
                }
            });
        });

        // ========== Fetch 함수들 ==========

        // 게시글 목록 가져오기
        async function loadPosts(category = null) {
            try {
                postsList.innerHTML = '<div class="loading" style="text-align: center; padding: 2rem; color: #666;">게시글을 불러오는 중...</div>';
                
                const response = await fetch(`${API_BASE_URL}/posts`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const posts = await response.json();
                
                // 최근 6개만 표시
                const recentPosts = posts.slice(0, 6);
                displayPosts(recentPosts);
                
            } catch (error) {
                postsList.innerHTML = `<div class="error" style="background-color: #ffebee; color: #c62828; padding: 1rem; border-radius: 4px; margin: 1rem 0;">게시글을 불러오는 중 오류가 발생했습니다: ${error.message}</div>`;
            }
        }

        // 게시글 목록 표시
        function displayPosts(posts) {
            if (posts.length === 0) {
                postsList.innerHTML = '<div class="empty-state" style="text-align: center; padding: 3rem; color: #666;"><p>게시글이 없습니다.</p></div>';
                return;
            }

            postsList.innerHTML = posts.map((post, index) => {
                const categories = ['자유게시판', '질문답변', '정보공유', '후기', '모임', '자유게시판'];
                const authors = ['개발자123', '초보개발자', '도구마스터', '성공한개발자', '모임장', '로드맵제작자'];
                const dates = ['2024.01.15', '2024.01.14', '2024.01.13', '2024.01.12', '2024.01.11', '2024.01.10'];
                
                // 본문을 100자로 제한
                const contentPreview = post.body.length > 100 
                    ? post.body.substring(0, 100) + '...' 
                    : post.body;

                return `
                    <article class="post-card" data-post-id="${post.id}">
                        <div class="post-header">
                            <span class="post-category">${categories[index] || '자유게시판'}</span>
                            <span class="post-date">${dates[index] || '2024.01.15'}</span>
                        </div>
                        <h3 class="post-title">${post.title}</h3>
                        <p class="post-content">${contentPreview}</p>
                        <div class="post-footer">
                            <div class="post-author">
                                <span class="author-name">${authors[index] || '사용자'}</span>
                            </div>
                            <div class="post-stats">
                                <span class="stat">👁 ${Math.floor(Math.random() * 500) + 50}</span>
                                <span class="stat">💬 ${Math.floor(Math.random() * 30) + 5}</span>
                                <span class="stat">❤️ ${Math.floor(Math.random() * 50) + 10}</span>
                            </div>
                        </div>
                    </article>
                `;
            }).join('');

            // 게시글 카드 클릭 이벤트 추가
            document.querySelectorAll('.post-card').forEach(card => {
                card.addEventListener('click', function() {
                    const postId = this.getAttribute('data-post-id');
                    viewPostDetail(postId);
                });
            });
        }

        // 인기 게시글 가져오기
        async function loadPopularPosts() {
            try {
                const response = await fetch(`${API_BASE_URL}/posts`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const posts = await response.json();
                
                // 조회수 기준으로 정렬 (실제로는 서버에서 처리)
                const popularPosts = posts.slice(0, 5);
                displayPosts(popularPosts);
                
            } catch (error) {
                console.error('인기 게시글을 불러오는 중 오류:', error);
            }
        }

        // 게시글 상세보기 (새 페이지로 이동하거나 모달 표시)
        function viewPostDetail(postId) {
            // 게시판 페이지로 이동하거나 상세 페이지 열기
            alert(`게시글 ID ${postId} 상세보기\n(실제 구현 시 게시판 페이지로 이동하거나 모달을 표시합니다)`);
        }

        // 인기 게시글 목록 업데이트 (오른쪽 사이드바)
        async function updatePopularPosts() {
            try {
                const response = await fetch(`${API_BASE_URL}/posts`);
                if (!response.ok) return;
                
                const posts = await response.json();
                const popularList = document.querySelector('.popular-list');
                
                if (popularList) {
                    popularList.innerHTML = posts.slice(0, 5).map((post, index) => `
                        <li class="popular-item" data-post-id="${post.id}">
                            <span class="popular-rank">${index + 1}</span>
                            <span class="popular-title">${post.title.length > 40 ? post.title.substring(0, 40) + '...' : post.title}</span>
                        </li>
                    `).join('');

                    // 인기 게시글 클릭 이벤트
                    document.querySelectorAll('.popular-item').forEach(item => {
                        item.addEventListener('click', function() {
                            const postId = this.getAttribute('data-post-id');
                            viewPostDetail(postId);
                        });
                    });
                }
            } catch (error) {
                console.error('인기 게시글 업데이트 중 오류:', error);
            }
        }

        // 페이지 로드 시 인기 게시글도 업데이트
        document.addEventListener('DOMContentLoaded', function() {
            updatePopularPosts();
        });
    </script>
</body>
</html>
